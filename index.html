<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>TridentSDK Docs</title>

    <link href="stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
      <script src="javascripts/all.js" type="text/javascript"></script>

      <script>
        $(function() {
          setupLanguages(["shell","java"]);
        });
      </script>
  </head>

  <body class="index">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
              <a href="#" data-language-name="java">java</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='https://tridentsdk.net'>TridentSDK Website</a></li>
            <li><a href='https://github.com/TridentSDK'>TridentSDK on GitHub</a></li>
            <li><a href='https://twitter.com/TridentSDK'>Follow Us on Twitter</a></li>
            <li><a href='http://github.com/AgentTroll/slate'>Contribute to the Docs</a></li>
            <li><a href='http://github.com/tripit/slate'>Generated by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p><aside class="notice">
Welcome to the TridentSDK Documentation site.
</aside></p>

<p>TridentSDK is a team composed of absolute best Java developers from the Bukkit API. Trident is a completely cleanroom reimplmentation of the Minecraft server, which will improve server performance, flexibility, and simplicity. </p>

<p>TridentSDK is the successor to the Bukkit/Spigot projects. Following the news of the &ldquo;takeover&rdquo; of the Bukkit project and the DMCA takedown of Bukkit, and therefore Spigot (we are quite aware of binary patches), we realized that someone needs to step up and create the best of server software for Minecraft after the decline of both projects. The result was TridentSDK, the development kit that is implemented by the server, Trident.</p>
<h2 id='how-to-use-the-documentation'>How to use the documentation</h2>
<p>You may be seeing just annotations in some parts of this document. This is because there are language tabs where you can switch which language the examples are in. Unlisted means that there is no support for the particular language (which are shell and java at the moment). If you aren&rsquo;t seeing the code, on mobile, open the nav and scroll up the sidebar, then press the other language. If you are on a desktop, on the top right is the language tabs, just click the other one.</p>
<h1 id='features'>Features</h1>
<table><thead>
<tr>
<th>Feature</th>
<th>Explanation</th>
<th>Other servers</th>
</tr>
</thead><tbody>
<tr>
<td>Developers</td>
<td>We are top-of-the-line developers from the Bukkit API</td>
<td>&#x2717;</td>
</tr>
<tr>
<td>Community</td>
<td>We are active community members and have high-profile connections to other developers</td>
<td>&#x2717;</td>
</tr>
<tr>
<td>Cleanroom</td>
<td>Legally stable, performance-oriented, controlled, simple</td>
<td>&#x2717;</td>
</tr>
<tr>
<td>Multithreaded</td>
<td>Effectively utilizes modern CPUs</td>
<td>&#x2717;</td>
</tr>
<tr>
<td>Tested</td>
<td>Published with results, all aspects and benchmarks + comparison included</td>
<td>&#x2717;</td>
</tr>
<tr>
<td>Pace</td>
<td>Development occurs nearly everyday</td>
<td>&#x2717;</td>
</tr>
</tbody></table>
<h1 id='installation'>Installation</h1>
<p>Because TridentSDK is currently a high-paced work in progress, and the reimplementation of the entire Minecraft server is time-taking, there are no builds availible to use. The server does not work at the moment. You will need to download the source and compile off of eachother.</p>
<h2 id='prestiques'>Prestiques</h2>
<p>To install Trident, you should have the following installed on your system:</p>

<ul>
<li><a href="https://docs.oracle.com/javase/7/docs/webnotes/install/">JDK 7</a> </li>
<li><a href="http://maven.apache.org/download.cgi">Maven</a></li>
<li><a href="http://git-scm.com/downloads">Git</a></li>
</ul>
<h2 id='source-download'>Source download</h2>
<blockquote>
<p>To download the server source, use:</p>
</blockquote>
<pre><code class="highlight shell">git clone https://github.com/TridentSDK/Trident.git
</code></pre>

<blockquote>
<p>To download the API source, use:</p>
</blockquote>
<pre><code class="highlight shell">git clone https://github.com/TridentSDK/TridentSDK.git
</code></pre>

<blockquote>
<p>To compile the final jar, use:</p>
</blockquote>
<pre><code class="highlight shell"><span class="nb">cd </span>TridentSDK
mvn clean install

<span class="c"># Unix</span>
mv target/tridentsdk-1.0-SNAPSHOT.jar ..
<span class="c"># Windows</span>
move target/tridentsdk-1.0-SNAPSHOT.jar ..

<span class="nb">cd</span> ../Trident
javac -d .. -cp <span class="s2">"../tridentsdk-1.0-SNAPSHOT.jar"</span> src/main/java/ src/main/java/net/tridentsdk/server/TridentStart.java
<span class="nb">cd</span> ..
</code></pre>

<p>After completing the above steps, you should be in the starting directory, with a fully compiled jar that can be run from the command line to start your server.</p>
<h2 id='troubleshooting'>Troubleshooting</h2><h4 id='command-not-found'>Command not found</h4>
<p>TridentSDK is developed primarily on Unix (Ubuntu, Debian) systems. If you get this, look up an alternative to your command on your OS.</p>

<p>If your command starts with <code class="prettyprint">git</code>, <code class="prettyprint">mvn</code>, or <code class="prettyprint">javac</code>, then you either need to install, or reinstall the tools in <a href="#prestiques">Prestiques</a>.</p>

<p>Another problem may be that you have not set your PATH environment variables yet. This is covered on the Presitques links.</p>
<h4 id='paths-cannot-be-resolved'>Paths cannot be resolved</h4>
<p>Just edit <code class="prettyprint">..</code> to your primary directory where you executed your git commands at</p>
<h4 id='where-is-my-jar-file'>Where is my jar file?</h4>
<p>It&rsquo;s in the working directory of the command line. For Unix, this is often in your Home directory, and for Windows, this is in the user directory. Therefore, I recommend <code class="prettyprint">cd</code>&lsquo;ing to your desktop or other place where you know exactly where all the files are going to go and how they are organized.</p>
<h2 id='updating'>Updating</h2>
<p>We are currently planning an update mechanism built into the server in the future. However, at the current moment, it has not been implemented. Open up your command line and execute the commands shown.</p>
<pre><code class="highlight shell"><span class="c"># Remove old files</span>
rm -r Trident
rm -r TridentSDK

<span class="c"># Download again</span>
git clone https://github.com/TridentSDK/Trident.git
git clone https://github.com/TridentSDK/TridentSDK.git
</code></pre>

<blockquote>
<p>Now go to <a href="#source-download">Source download</a> and use the <code class="prettyprint">To compile the final jar</code> steps.</p>
</blockquote>
<h1 id='contributing'>Contributing</h1>
<p>On the left, near the bottom, you can see a few links. Currently, there are 3 portions of the project that help would be needed in, 2 which are effective as of now.</p>

<p>First, we will need help with the source. The highest priority right now is player joining, which we have the protocol and world loading facitlities that are mature enough to be used for the purpose. The protocol is very elusive, and if you have used it before, help would be appreciated. Head over to our GitHub page, or tweet to us to find out how to help.</p>

<p>Second, we will need help with documentation. There are two places where documentation is needed - here, and on the source. Javadocs are sparingly done, as forward development and getting performance testing and finishing the server basics is the main priority. We could use some extra hands on source documentation. The documentation here is how to use the API, not what each method does. Head over to the Contribute to the Docs and submit a PR to the index.md on master, and we can recompile the site. Or, head over to the GitHub and submit a PR to add documentation comments to the methods.</p>

<p>Third, and our lowest priority, is commumnity administration. As we do not have a large community yet, you may help by sharing TridentSDK with your friends and users, and later on, when TridentSDK grows, you can apply for administration positions. </p>
<h1 id='api'>API</h1>
<p>TridentSDK provides an excellent API for developing server modifications that can be used to modify game play that is determined by the server.</p>
<h2 id='prestiques'>Prestiques</h2>
<ul>
<li><a href="http://en.wikibooks.org/wiki/Java_Programming/Java_IDEs">A Java IDE</a></li>
<li><a href="https://docs.oracle.com/javase/7/docs/webnotes/install/">JDK 7</a> </li>
<li><a href="http://maven.apache.org/download.cgi">Maven</a></li>
<li><a href="http://git-scm.com/downloads">Git</a></li>
<li>Knowledge of the Java language</li>
</ul>
<h2 id='starting'>Starting</h2>
<p>As well as what is required in the prestiques, it is <strong>imperative</strong> that you know how to use Java and are familiar with it.</p>

<p>After you have sufficient familiarity with Java, you may checkout our <a href="http://tridentsdk.github.io/Javadocs/">Javadocs</a>, but you may want to continue further with the documentation (there are lots of packages!) before starting.</p>
<h2 id='setup'>Setup</h2>
<blockquote>
<p>Getting TridentSDK</p>
</blockquote>
<pre><code class="highlight shell">git clone https://github.com/TridentSDK/TridentSDK.git
<span class="nb">cd </span>TridentSDK
mvn clean install
</code></pre>

<p>First, you would want to pull from our <code class="prettyprint">TridentSDK</code> repo, and compile it. The dependency can be found in the <code class="prettyprint">target</code> folder after running <code class="prettyprint">mvn clean install</code>. </p>

<p>Then, start up your IDE, which you should learn how to use from the distributor&rsquo;s website. If you do not know how to use your IDE (which is used when practicing Java), go back to learning Java. Otherwise, create a new project, and add the TridentSDK dependency to your workspace.</p>
<h2 id='creating-the-main-class'>Creating the main class</h2>
<blockquote>
<p>Extend <code class="prettyprint">TridentPlugin</code></p>
</blockquote>
<pre><code class="highlight java"><span class="kn">package</span> <span class="n">net</span><span class="o">.</span><span class="na">tridentsdk</span><span class="o">.</span><span class="na">project</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">net.tridentsdk.plugin.TridentPlugin</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Project</span> <span class="kd">extends</span> <span class="n">TridentPlugin</span> <span class="o">{</span>

<span class="o">}</span>
</code></pre>

<blockquote>
<p>Annotate with <code class="prettyprint">PluginDescription</code></p>
</blockquote>
<pre><code class="highlight java"><span class="kn">package</span> <span class="n">net</span><span class="o">.</span><span class="na">tridentsdk</span><span class="o">.</span><span class="na">project</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">net.tridentsdk.plugin.TridentPlugin</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">net.tridentsdk.plugin.annotation.PluginDescription</span><span class="o">;</span>

<span class="nd">@PluginDescription</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"Project"</span><span class="o">,</span> <span class="n">author</span> <span class="o">=</span> <span class="s">"Pierre C"</span><span class="o">,</span> <span class="n">version</span> <span class="o">=</span> <span class="s">"6.9"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Project</span> <span class="kd">extends</span> <span class="n">TridentPlugin</span> <span class="o">{</span>

<span class="o">}</span>
</code></pre>

<blockquote>
<p>Use lifecycle methods</p>
</blockquote>
<pre><code class="highlight java"><span class="kn">package</span> <span class="n">net</span><span class="o">.</span><span class="na">tridentsdk</span><span class="o">.</span><span class="na">project</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">net.tridentsdk.plugin.TridentPlugin</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">net.tridentsdk.plugin.annotation.PluginDescription</span><span class="o">;</span>

<span class="nd">@PluginDescription</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"Project"</span><span class="o">,</span> <span class="n">author</span> <span class="o">=</span> <span class="s">"Pierre C"</span><span class="o">,</span> <span class="n">version</span> <span class="o">=</span> <span class="s">"6.9"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Project</span> <span class="kd">extends</span> <span class="n">TridentPlugin</span> <span class="o">{</span>
    <span class="nd">@Override</span> <span class="kd">public</span> <span class="kt">void</span> <span class="n">onEnable</span><span class="o">()</span> <span class="o">{</span>
    <span class="o">}</span>

    <span class="nd">@Override</span> <span class="kd">public</span> <span class="kt">void</span> <span class="n">onLoad</span><span class="o">()</span> <span class="o">{</span>
    <span class="o">}</span>

    <span class="nd">@Override</span> <span class="kd">public</span> <span class="kt">void</span> <span class="n">onDisable</span><span class="o">()</span> <span class="o">{</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<p>The first step in development of a Trident plugin is to create the main class. This is where all of your plugin&rsquo;s functional aspects are initialized and started. Create a new package titled with your domain, backwards. For example, if you own <code class="prettyprint">example.com</code>, then your package would be <code class="prettyprint">com.example.project</code>, and project can be changed to your project name. This does not affect functionality. If you do not own a domain, you can use your email. For example, if you owned <code class="prettyprint">someone@random.com</code>, then use <code class="prettyprint">com.random.someone</code>. If you have a <code class="prettyprint">-</code> character, use an underscore (<code class="prettyprint">_</code>) instead.</p>

<p><aside class="warning">
DO NOT use the package name <code class="prettyprint">net.tridentsdk.*</code>. Anything starting with that package will not have its classes loaded, therefore rendering the plugin useless.</p>

<p>In the code examples, a <code class="prettyprint">net.tridentsdk</code> domain is used for example ONLY.
</aside></p>

<p>Then, create a new Java class, which is named your project name. The class name does not affect functionality. After creating it, you would <code class="prettyprint">extend TridentPlugin</code>, where TridentPlugin is <code class="prettyprint">net.tridentsdk.plugin.TridentPlugin</code>.</p>

<hr>

<p>Then, you would add a PluginDescription annotation to your class to mark the load parameters.</p>

<p>Of course, replace the name with the name of the project (does not affect functionality), the author with your name/username/online name/alias (does not affect functionality), and the version with the plugin version (does not affect functionality).</p>

<p>In reality, if this is a quick test plugin, only the <code class="prettyprint">name</code> field is required to be filled.</p>

<hr>

<p><code class="prettyprint">TridentPlugin</code> provides several methods that are executed during various events in a plugin lifecycle. They are called in this order: <code class="prettyprint">onLoad</code>, <code class="prettyprint">onEnable</code>, <code class="prettyprint">onDisable</code>. <code class="prettyprint">onLoad</code> is called after the Plugin object is created. <code class="prettyprint">onEnable</code> is called when the plugin is enabled and starts to be provided with runtime dependecies and after class load and initialization. Finally, <code class="prettyprint">onDisable</code> is called when the plugin is disabled, because of an error or because of a server shutdown.</p>

<p>These methods are overridden to execute the given actions during the lifecycle events. They are not required, and if you don&rsquo;t need them, you should not override them, as that would not make sense.</p>
<h2 id='commands'>Commands</h2>
<blockquote>
<p>Implementing a proper command</p>
</blockquote>
<pre><code class="highlight java"><span class="kn">package</span> <span class="n">net</span><span class="o">.</span><span class="na">tridentsdk</span><span class="o">.</span><span class="na">project</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">net.tridentsdk.api.entity.living.Player</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">net.tridentsdk.plugin.cmd.Command</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">net.tridentsdk.plugin.cmd.CommandIssuer</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">net.tridentsdk.plugin.cmd.ConsoleSender</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Project</span> <span class="kd">extends</span> <span class="n">Command</span> <span class="o">{</span>
    <span class="nd">@Override</span> <span class="kd">public</span> <span class="kt">void</span> <span class="n">handlePlayer</span><span class="o">(</span><span class="n">Player</span> <span class="n">player</span><span class="o">,</span> <span class="n">String</span> <span class="n">arguments</span><span class="o">,</span> <span class="n">String</span> <span class="n">alias</span><span class="o">)</span> <span class="o">{</span>
    <span class="o">}</span>

    <span class="nd">@Override</span> <span class="kd">public</span> <span class="kt">void</span> <span class="n">handleConsole</span><span class="o">(</span><span class="n">ConsoleSender</span> <span class="n">sender</span><span class="o">,</span> <span class="n">String</span> <span class="n">arguments</span><span class="o">,</span> <span class="n">String</span> <span class="n">alias</span><span class="o">)</span> <span class="o">{</span>
    <span class="o">}</span>

    <span class="nd">@Override</span> <span class="kd">public</span> <span class="kt">void</span> <span class="n">handle</span><span class="o">(</span><span class="n">CommandIssuer</span> <span class="n">sender</span><span class="o">,</span> <span class="n">String</span> <span class="n">arguments</span><span class="o">,</span> <span class="n">String</span> <span class="n">alias</span><span class="o">)</span> <span class="o">{</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<p><aside class="warning">
DO NOT register your commands explicitly unless they do not work. Doing so will result in the command being called twice!
</aside></p>

<p>Commands are implemented by subclassing the <code class="prettyprint">Command</code> class, at <code class="prettyprint">net.tridentsdk.plugin.cmd.Command</code>. In order to handle commands, there are 3 provided methods to check for commands. They are <code class="prettyprint">handle</code>, <code class="prettyprint">handlePlayer</code>, and <code class="prettyprint">handleConsole</code>. At the time of writing, TridentSDK does not support Command Blocks. The <code class="prettyprint">handle</code> method handles all commands that are passed to it. <code class="prettyprint">handlePlayer</code> only handles player executed commands, and <code class="prettyprint">handleConsole</code> only handles console commands. </p>

<p>The first parameter passed to the handle method is the issuer of the command. This can be a player or console in <code class="prettyprint">handle</code>, which is checked by using <code class="prettyprint">instanceof</code> for the Player or ConsoleSender classes. The second parameters is args, which is unused at the time. Finally, the alias is the command executed, the first word after <code class="prettyprint">/</code> in the command box. Each has its documentation at the respective classes. </p>
<h2 id='events'>Events</h2>
<blockquote>
<p>This is a proper event listener</p>
</blockquote>
<pre><code class="highlight java"><span class="kn">package</span> <span class="n">net</span><span class="o">.</span><span class="na">tridentsdk</span><span class="o">.</span><span class="na">project</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">net.tridentsdk.api.event.entity.EntityDeathEvent</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">net.tridentsdk.api.event.Listener</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Project</span> <span class="kd">implements</span> <span class="n">Listener</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="n">onEvent</span><span class="o">(</span><span class="n">EntityDeathEvent</span> <span class="n">event</span><span class="o">)</span> <span class="o">{</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<blockquote>
<p>This is a proper way to prioritize events:</p>
</blockquote>
<pre><code class="highlight java"><span class="kn">package</span> <span class="n">net</span><span class="o">.</span><span class="na">tridentsdk</span><span class="o">.</span><span class="na">project</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">net.tridentsdk.api.event.entity.EntityDeathEvent</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">net.tridentsdk.api.event.Call</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">net.tridentsdk.api.event.Importance</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">net.tridentsdk.api.event.Listener</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Project</span> <span class="kd">implements</span> <span class="n">Listener</span> <span class="o">{</span>
    <span class="nd">@Call</span><span class="o">(</span><span class="n">Importance</span><span class="o">.</span><span class="na">LOWEST</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="n">onEvent</span><span class="o">(</span><span class="n">EntityDeathEvent</span> <span class="n">event</span><span class="o">)</span> <span class="o">{</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<blockquote>
<p>Implementing ignorance</p>
</blockquote>
<pre><code class="highlight java"><span class="n">Listenable</span> <span class="n">event</span> <span class="o">=</span> <span class="k">new</span> <span class="n">EntityDeathEvent</span><span class="o">(</span><span class="cm">/* Your values */</span><span class="o">);</span>
<span class="n">EventManager</span><span class="o">.</span><span class="na">call</span><span class="o">(</span><span class="n">event</span><span class="o">);</span>
<span class="k">if</span> <span class="o">(</span><span class="n">event</span><span class="o">.</span><span class="na">isIgnored</span><span class="o">())</span> <span class="o">{</span>
    <span class="c1">// Do what you need to do if the event is cancelled</span>
<span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
    <span class="c1">// Proceed</span>
<span class="o">}</span>
</code></pre>

<blockquote>
<p>Ignoring events</p>
</blockquote>
<pre><code class="highlight java"><span class="kn">package</span> <span class="n">net</span><span class="o">.</span><span class="na">tridentsdk</span><span class="o">.</span><span class="na">project</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">net.tridentsdk.api.event.entity.EntityDeathEvent</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">net.tridentsdk.api.event.Listener</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Project</span> <span class="kd">implements</span> <span class="n">Listener</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="n">onEvent</span><span class="o">(</span><span class="n">EntityDeathEvent</span> <span class="n">event</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">event</span><span class="o">.</span><span class="na">ignore</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<p>Unlike the Bukkit event system, the Trident events are automatically registered. You should not explicity register your events.</p>

<p><aside class="warning">
DO NOT register your events explicitly unless they do not work. Doing so will result in the event being called twice!
</aside></p>

<p>In order to use this, the requirements for an event method is to have a <code class="prettyprint">public void</code> method in a class implementing <code class="prettyprint">Listener</code>, where Listener is <code class="prettyprint">net.tridentsdk.api.event.Listener</code>, and the method must have a single parameter that is superclassed by Listenable.</p>

<p><aside class="notice">
You can prevent your class from being registered if implementing Listener and marked with <code class="prettyprint">@IgnoreRegistration</code>.
</aside></p>

<p>Events are usually self-descriptive by class name, for example, EntityDeathEvent occurs when an entity dies, of course, it must be a LivingEntity.</p>

<p>Events can be removed from the event caller list using <a href="http://tridentsdk.github.io/Javadocs/net/tridentsdk/api/event/EventManager.html#unregister(net.tridentsdk.api.event.Listener)"><code class="prettyprint">EventManager#unregister(Listener)</code></a>, where <code class="prettyprint">Listener</code> represents an instance of the listener that was registered into the list.</p>

<hr>

<p>Event priorities are annotated by a <code class="prettyprint">@Call</code> annotation, with an <code class="prettyprint">Importance</code> parameter.</p>

<p>Importance events are called in this order: <code class="prettyprint">LOWEST</code>, <code class="prettyprint">LOW</code>, <code class="prettyprint">MEDIUM</code>, <code class="prettyprint">HIGH</code>, <code class="prettyprint">HIGHEST</code>. This occurs because the most important events must edit what the other plugins have set to the event. If 2 events have the same priority, then they are registered by which plugin loads first. If the event does not have a <code class="prettyprint">@Call</code> annotation, then the importance is automatically set to <code class="prettyprint">Importance.MEDIUM</code>.</p>

<p>Importance is valuable in APIs, where you&rsquo;d want to check in with events, but not edit them, and allow other plugins to view event modifications made by the API, as well as providing higher level plugins to have control over the event result.</p>

<hr>

<p>Events that <code class="prettyprint">implement Ignorable</code> where Ignorable is <code class="prettyprint">net.tridentsdk.api.event.Ignorable</code> can be used to prevent and implement cancellation functionality. To provide cancellation functionality for your event, simply <code class="prettyprint">implement Ignorable</code>, overriding the two new methods to modify a <code class="prettyprint">boolean</code> field, which is checked when the event is called. Events are called using <a href="http://tridentsdk.github.io/Javadocs/net/tridentsdk/api/event/EventManager.html#call(net.tridentsdk.api.event.Listenable)"><code class="prettyprint">EventManager#call(Listenable)</code></a>. After calling, check the event object using <code class="prettyprint">isIgnored()</code>, which returns <code class="prettyprint">true</code> if the event should be cancelled.</p>

<p>For the API user, you can choose to have the event do it&rsquo;s functionality specified in the cancellation policy by calling <a href="http://tridentsdk.github.io/Javadocs/net/tridentsdk/api/event/Ignorable.html#ignore(boolean)"><code class="prettyprint">Ignorable#ignore(boolean)</code></a>, where the boolean is true if the event should be cancelled, or false to prevent the event from being cancelled by lower priority listeners. You can check if the event has been cancelled before it reached the current listener using <a href="http://tridentsdk.github.io/Javadocs/net/tridentsdk/api/event/Ignorable.html#isIgnored()"><code class="prettyprint">Ignorable#isIgnored()</code></a>, which returns true if the listenable should be ignored.</p>

<p><aside class="warning">
Some Listenables do not implement <code class="prettyprint">Ignorable</code>. Check the docs!
</aside></p>
<h2 id='configuration'>Configuration</h2>
<blockquote>
<p>Correctly creating a configuration file, or multiple.</p>
</blockquote>
<pre><code class="highlight java"><span class="kn">import</span> <span class="nn">net.tridentsdk.api.config.JsonConfig</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">net.tridentsdk.api.factory.Factories</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Project</span> <span class="kd">extends</span> <span class="n">TridentPlugin</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">JsonConfig</span> <span class="n">config</span> <span class="o">=</span>
            <span class="n">Factories</span>
            <span class="o">.</span><span class="na">configs</span><span class="o">()</span>
            <span class="o">.</span><span class="na">createConfig</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">getConfigDirectory</span><span class="o">()</span> <span class="o">+</span> <span class="s">"/configuration.json"</span><span class="o">);</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">JsonConfig</span> <span class="n">anotherConfig</span> <span class="o">=</span>
            <span class="n">Factories</span>
            <span class="o">.</span><span class="na">configs</span><span class="o">()</span>
            <span class="o">.</span><span class="na">createConfig</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">getConfigDirectory</span><span class="o">()</span> <span class="o">+</span> <span class="s">"/players.json"</span><span class="o">)</span>
<span class="o">}</span>
</code></pre>

<blockquote>
<p>Deleting your file</p>
</blockquote>
<pre><code class="highlight java"><span class="k">try</span> <span class="o">{</span>
    <span class="n">Files</span><span class="o">.</span><span class="na">delete</span><span class="o">(</span><span class="n">config</span><span class="o">.</span><span class="na">getPath</span><span class="o">());</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
<span class="o">}</span>
</code></pre>

<blockquote>
<p>Reloading the configuration</p>
</blockquote>
<pre><code class="highlight java"><span class="n">config</span><span class="o">.</span><span class="na">reload</span><span class="o">();</span>
</code></pre>

<p>The TridentSDK configuration is similar to that of the Bukkit configuration, however, we use JSON instead of YAML. JSON has a slightly more complex syntax than YAML, however, it does not have the same constraints (such as anti-tabs, spacing, etc). </p>

<p>Each <code class="prettyprint">TridentPlugin</code> has a configuration directory to hold files the plugin may have. This can be accessed using <code class="prettyprint">TridentPlugin#getgetConfigDirectory()</code>, returned as a <code class="prettyprint">File</code>. This file is actually a folder.</p>

<p>A configuration file can be created, or retrieved using the <code class="prettyprint">ConfigFactory#createConfig(...)</code> method, from <code class="prettyprint">Factories#configs()</code>. More information about <code class="prettyprint">Factories</code> can be found in the <a href="#factories">section below</a>. If this config exists, the data will be loaded into the returned <code class="prettyprint">JsonConfig</code> object. Else, it will be created for you. The path is preferred to have a <code class="prettyprint">.json</code> file type.</p>

<p>If you do not want your configuration, it can be deleted at the path specified in the JsonConfig.</p>

<p>Once the <code class="prettyprint">JsonConfig</code> constructor is invoked, the object will automatically reload and store the configuration to memory. If the config is changed externally, such as by opening with a text editor, then you must reload yourself.</p>
<h2 id='factories'>Factories</h2><h1 id='benchmarks'>Benchmarks</h1>
<p><aside class="notice">
Nerd section! You don&rsquo;t need this information to make a plugin!
</aside></p>

<p>TridentSDK is heavily benchmarked. Some of the most performance critical classes, such as the reflection API, scheduling, events, and caching are benchmarked inside the Trident test package.</p>

<p>This is a list of the currently benchmarked classes:</p>

<ul>
<li><a href="http://bit.ly/1vwutXc">Reflection benchmark</a></li>
<li><a href="http://bit.ly/1y90tml">ConcurrentHashMapV8 benchmark</a></li>
<li><a href="http://bit.ly/1A21o5O">ConcurrentCache benchmark</a></li>
<li><a href="http://bit.ly/1A9XwiG">EventManager benchmark</a></li>
<li><a href="http://bit.ly/12fTNow">Scheduler benchmark</a></li>
</ul>

<p>All benchmarks have a baseline benchmark at 0, called <em>control</em>. The traditional benchmark, before the update, used straight pounding on the data structure that was being benchmarked. In a realistic situation, this does not happen. Thankfully, we used <a href="http://openjdk.java.net/projects/code-tools/jmh/">JMH</a>, which is feature packed with everything we needed to performance test our classes.</p>

<p>One of the features was the <code class="prettyprint">Blackhole</code> class, which is used in the benchmarking infrastructure to prevent optimization of the harness. Then, there was <code class="prettyprint">Blackhole.consumeCPU(int)</code>. This is used to amoritize the test pounding on the harness, which was used in the tests to improve realism and accuracy of the calcuations. </p>

<p>The graphs were a result of 4 hours of work to experiment with Google Charts&rsquo;s <a href="https://developers.google.com/chart/">excellent API</a>. However, there were a couple things that may seem to be off at first. The primary thing you&rsquo;d see is that there are <em>negative values</em>. How is this possible? Let&rsquo;s begin by examining how the charts are generated from the data.</p>

<p>The charts are generated by running <code class="prettyprint">Benchmarks.chart(Benchmarks.parse(Collection&lt;RunResult&gt;, String)</code>. The <code class="prettyprint">parse</code> method iterates through the results to find the times and label of the benchmarks. All benchmarks are run with a <code class="prettyprint">control</code> group, which measures the CPU cycles taken up by the amoritization method discussed above. Since each harness runs the consumption method, we have the actual benchmark PLUS the cost of running the amoritization. Therefore, we plot the data by subtracting the amoritization cost from the total benchmark. HOWEVER, this is not totally accurate. The amoritization harness runs independently of the other harnesses, therefore, it may be larger or smaller than the benchmarked value of the particular harness.</p>

<p>Secondly, you may see that if you run the method several times, you&rsquo;d get different colors (yay). This WILL NOT affect the data produced by the graph. The colors are randomized when generated, so that will not comprimise the integrity or the accuracy of the data gathered during the test.</p>

<p>Third, you might also see that control is a straight line&hellip; Yes, it is a straight line if you look at the URL data. Control, again, is the amoritization cost, which is subtracted by the amoritization cost when plotted&hellip; So the amoritization cost minus the amoritization cost is 0.</p>

<hr>

<p>If you&rsquo;d like to use <code class="prettyprint">Benchmarks</code> for your own benchmarks, please note the Apache License, and <code class="prettyprint">BenchmarkTemplate</code> can be used as a starter for your benchmarks. Benchmarking requires a large amount of knowledge on how the Java technologies (GC, JIT, JVM, etc) work. I am not liable for any damages caused by the results I have posted  or generated from my class. They are meant for reference use only. </p>

<p>Reference article: <a href="http://shipilev.net/blog/2014/nanotrusting-nanotime/">Nanotrusting the Nanotime</a>, by Aleksey Shipil—ëv</p>
<h2 id='how-to-read-the-charts'>How to read the charts</h2>
<p>The charts are in nanoseconds / operation on the Y axis, which corresponds with the amoritization cycles for that harness point. 1024 cycles represents light server load, while 1 represents heavy server load. The data for the selected item should fit the load capacity of the server, and the majority of the fastest option. TridentSDK maintains responsiveness by allowing slow registry trade for fast runtime. Lower ns/op is better.</p>
<h2 id='why-benchmarking-matters'>Why benchmarking matters</h2>
<p>The past generation server software, and designs based on them, such as Sponge/Forge/NMS based servers are unable to multithread their servers because NMS limits the ability to exploit multiple processors. Servers are plagued with &ldquo;Cannot keep up&rdquo; warnings, which result in too many tasks being executed for the given time in a server heartbeat. In order to reduce these warnings, TridentSDK is implemented cleanroom, breaking free of the multithreading bonds to fully use the processor efficiently, and reduce the task execution time to fit more in a single tick.</p>

<p>These tests compare performance of a particular class to previous generation software or library classes (that may or may not have the same semantic functionality as the benchmark comparison). They also help debug classes, as performance issues relate to bugs in the code, or inefficient/over-defensive programming.</p>

<p>Benchmarking also helps make decisions with which option to use, and how well it performs compared to other pieces of software. TridentSDK, is of course, performance-focused.</p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
                <a href="#" data-language-name="java">java</a>
          </div>
      </div>
    </div>
  </body>
</html>
